<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Google OAuth redirect derived from origin in JS for prod -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Terms of Use - Polly 3D</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/login.css" />
  <style>
    /* È°µÂ∫ïËÉåÊôØÊîπ‰∏∫‰ΩìÈ™åÂõæÔºå‰∏é FAQ ‰øùÊåÅ‰∏ÄËá¥ */
    footer::before {
      background: url('assets/images/tab2-bg.png') center / cover no-repeat !important;
      backdrop-filter: none !important;
      opacity: 1 !important;
    }
    /* È°µÈù¢Êï¥‰ΩìËÉåÊôØ‰∏é FAQ ‰∏ÄËá¥ */
    body {
      background-color: #F4F7FF !important;
      background-image: url('assets/images/tab2-bg.png') !important;
      background-repeat: no-repeat !important;
      background-position: center top !important;
      background-size: cover !important;
      background-attachment: scroll !important; /* ÈÅøÂÖç fixed Âú®Â∞èÂ±è‰∏ãÈÄ†ÊàêÂ∑¶Âè≥ÊíëÂºÄ */
    }
    /* ÂâØÊ†áÈ¢òÔºàh2ÔºâÊ†∑ÂºèÔºåÊåâËßÑËåÉÂ∫îÁî®Âú®Êú¨È°µ */
    main.container h2 {
      font-family: 'Lexend';
      font-style: normal;
      font-weight: 500;
      font-size: 36px;
      line-height: 80px;
      display: flex;
      color: #111111;
    }
  </style>
</head>
<body>
  <header>
    <nav class="container">
      <a class="logo" href="index.html" aria-label="Polly home">
        <img src="assets/images/logo-modern.svg" alt="Polly logo" onerror="this.onerror=null; this.src='assets/images/logo.png';" />
        <span class="logo-text">Polly</span>
      </a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="gallery.html">Gallery</a></li>
        <li><a href="faq.html">FAQ</a></li>
        <li><a id="login-link" href="#">Login</a></li>
        <!-- User menu: shown after authentication -->
        <li id="user-menu" style="display:none; position:relative;">
          <button id="avatar-button" class="avatar-btn" aria-label="User menu">
            <img id="avatar-image" alt="User avatar" />
          </button>
          <div id="user-popover" class="user-popover" style="display:none;">
            <a id="menu-assets" class="popover-item" href="assets.html">
              <span class="popover-icon" aria-hidden="true">üë§</span>
              <span class="popover-text">My Assets</span>
            </a>
            <a id="menu-order" class="popover-item" href="order.html">
              <span class="popover-icon" aria-hidden="true">üßæ</span>
              <span class="popover-text">My order</span>
            </a>
            <button id="menu-signout" class="popover-item" type="button">
              <span class="popover-icon" aria-hidden="true">‚Ü©Ô∏è</span>
              <span class="popover-text">Sign out</span>
            </button>
          </div>
        </li>
      </ul>
    </nav>
  </header>

  <main class="container" style="padding: 32px 0; max-width: 900px;">
    <h1 style="margin-bottom: 16px; font-family: 'Lexend'; font-style: normal; font-weight: 500; font-size: 60px; line-height: 80px; text-transform: capitalize; color: #111111;">Terms of Use</h1>
    <p style="color: var(--secondary-color); margin-bottom: 24px;">Please read and agree to the following terms before using Polly 3D.</p>

    <section style="margin-bottom: 20px;">
      <h2>1. Scope of Service</h2>
      <p>Polly 3D provides online conversion of images to 3D models and related display services. We may update or adjust the services at any time to improve experience and stability.</p>
    </section>

    <section style="margin-bottom: 20px;">
      <h2>2. Account and Security</h2>
      <p>You are responsible for safeguarding your account and login credentials. You bear the risks and losses arising from any unauthorized use of your account.</p>
    </section>

    <section style="margin-bottom: 20px;">
      <h2>3. User Content and Copyright</h2>
      <p>You must have legal rights to the content you upload and must not infringe upon others‚Äô copyrights or privacy. You grant us a reasonable license to use the content to provide generation, preview, and hosting services.</p>
    </section>

    <section style="margin-bottom: 20px;">
      <h2>4. Prohibited Activities</h2>
      <p>You may not use the service for unlawful or harmful activities, including distributing malware, bypassing security measures, or violating others‚Äô legal rights.</p>
    </section>

    <section style="margin-bottom: 20px;">
      <h2>5. Disclaimer</h2>
      <p>We do not warrant uninterrupted or error-free service at all times. We are not liable, to the extent permitted by law, for losses caused by networks, third-party services, or force majeure.</p>
    </section>

    <section style="margin-bottom: 20px;">
      <h2>6. Limitation of Liability</h2>
      <p>To the maximum extent permitted by applicable law, we are not responsible for indirect, incidental, or consequential damages arising from the use or inability to use the service.</p>
    </section>

    <section style="margin-bottom: 20px;">
      <h2>7. Termination and Changes</h2>
      <p>If you violate these terms or present risk, we may suspend or terminate the services to you. We may update these terms at any time and will publish updates on the site.</p>
    </section>

    <section style="margin-bottom: 20px;">
      <h2>8. Governing Law and Dispute Resolution</h2>
      <p>These terms are governed by applicable law. In case of disputes, both parties should attempt amicable negotiation; if negotiation fails, submit the case to a competent court.</p>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-frame">
        <p class="footer-copyright">&copy; 2023 Polly. All rights reserved.</p>
        <div class="footer-links contact-row">
          <a class="footer-email" href="mailto:support@polly3d.com" aria-label="Email support@polly3d.com">support@polly3d.com</a>
          <a class="footer-phone" href="tel:8888888888" aria-label="Phone 888-888-8888">888-888-8888</a>
        </div>
        <div class="footer-list">
          <a class="footer-privacy" href="privacy.html">Privacy Policy</a>
          <a class="footer-terms" href="terms.html">Terms of Use</a>
        </div>
      </div>
    </div>
  </footer>
  
  <!-- Login Modal (Figma-styled) -->
  <div id="login-modal" class="login-overlay">
    <div class="login-card">
      <div class="login-header">
        <span class="login-title">Sign In</span>
        <button id="login-close" aria-label="Close" class="login-close">√ó</button>
      </div>
      <!-- Step 1: method selection -->
      <div id="login-step-select" class="login-section" style="display:block;">
        <button id="select-email-or-phone" class="login-btn neutral figma-cta">
          <span>‚úâÔ∏è</span>
          <span class="gradient-label">Continue with Email/Phone</span>
        </button>
        <button id="select-apple" class="login-btn neutral figma-cta">
          <span class="gradient-icon">Ô£ø</span>
          <span class="gradient-label">Continue with AppleID</span>
        </button>
        <button id="select-google" class="login-btn neutral figma-cta">
          <span class="gradient-icon">G</span>
          <span class="gradient-label">Continue with Google</span>
        </button>
        <div class="login-disclaimer">I agree to the <a href="terms.html">Terms of Use</a> and <a href="privacy.html">Privacy Policy</a></div>
      </div>
      <!-- Step 2: forms -->
      <div id="login-step-forms" class="login-section" style="display:none;">
        <div class="login-row" style="margin-bottom:10px;">
          <button id="login-back" class="login-back">‚Üê</button>
          <div style="flex:1"></div>
        </div>
        <div class="login-tabs">
          <button id="tab-sms-otp" class="login-btn neutral tab">Phone</button>
          <button id="tab-email-otp" class="login-btn neutral tab">Email</button>
        </div>
        <!-- SMS OTP Login -->
        <div id="login-form-sms-otp" class="login-form" style="display:flex;">
          <div class="login-row">
            <select id="sms-country" class="login-select">
              <option value="+886">TW +886</option>
              <option value="+86">CN +86</option>
              <option value="+852">HK +852</option>
              <option value="+81">JP +81</option>
              <option value="+1">US +1</option>
            </select>
            <input id="sms-otp-phone" type="tel" placeholder="Phone number" class="login-input" />
          </div>
          <div class="login-row">
            <input id="sms-otp-code" type="text" placeholder="Verification code" class="login-input" />
            <button id="sms-otp-send" class="login-btn neutral" style="flex:0 0 140px;">Send</button>
          </div>
          <button id="sms-otp-login" class="login-btn primary login-submit" disabled>Continue</button>
        </div>
        <!-- Email OTP Login -->
        <div id="login-form-email-otp" class="login-form">
          <input id="email-otp-email" type="email" placeholder="Email" class="login-input" />
          <div class="login-row">
            <input id="email-otp-code" type="text" placeholder="Verification code" class="login-input" />
            <button id="email-otp-send" class="login-btn neutral" style="flex:0 0 140px;">Send</button>
          </div>
          <button id="email-otp-login" class="login-btn primary login-submit" disabled>Continue</button>
        </div>
        <div class="login-disclaimer">I agree to the <a href="terms.html">Terms of Use</a> and <a href="privacy.html">Privacy Policy</a></div>
      </div>
      <div id="login-error" class="login-error" style="display:none;">Sign in failed, please try again.</div>
    </div>
  </div>

  <!-- Apple Sign-In Web SDK -->
  <script src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"></script>
  <script>
    (function(){
      try {
        if (window.location.hostname === 'localhost') {
          window.POLLY_AUTH_BASE = 'http://localhost:8787/';
        } else {
          // Use same-origin for production to avoid upstream IP without valid cert
          window.POLLY_AUTH_BASE = window.location.origin + '/';
        }
      } catch(_){ }
    })();
  </script>
  <script>
    (function(){
      try {
        // Force direct Google OAuth to avoid any redirects to an upstream IP
        window.POLLY_GOOGLE_CLIENT_ID = '461513375444-op1d4mv4qtj3ccphlhln9prfgpa5ias3.apps.googleusercontent.com';
        window.POLLY_GOOGLE_FORCE_DIRECT = true;
        window.POLLY_GOOGLE_RESPONSE_TYPE = 'token id_token';
        window.POLLY_GOOGLE_SCOPE = 'openid email profile';
      } catch(_){ }
    })();
  </script>
  <script>
    (function(){
      const loginLink = document.getElementById('login-link');
      const loginModal = document.getElementById('login-modal');
      const loginClose = document.getElementById('login-close');
      // ÁÇπÂáªËÉåÊôØÂÖ≥Èó≠
      if (loginModal) {
        loginModal.addEventListener('click', function(e){ if (e.target === loginModal) { loginModal.style.display = 'none'; } });
      }
      const loginStepSelect = document.getElementById('login-step-select');
      const loginStepForms = document.getElementById('login-step-forms');
      const loginBack = document.getElementById('login-back');
      const tabEmailOtp = document.getElementById('tab-email-otp');
      const tabSmsOtp = document.getElementById('tab-sms-otp');
      const formEmailOtp = document.getElementById('login-form-email-otp');
      const formSmsOtp = document.getElementById('login-form-sms-otp');
      const selectApple = document.getElementById('select-apple');
      function showSelect(){ if(loginStepSelect && loginStepForms){ loginStepSelect.style.display='block'; loginStepForms.style.display='none'; } }
      function showForms(){ if(loginStepSelect && loginStepForms){ loginStepSelect.style.display='none'; loginStepForms.style.display='block'; } }
      function showTab(name){ if(formEmailOtp && formSmsOtp){ formEmailOtp.style.display = (name==='email-otp') ? 'flex' : 'none'; formSmsOtp.style.display = (name==='sms-otp') ? 'flex' : 'none'; } }
      function openModal(){ if(loginModal){ loginModal.style.display='flex'; showSelect(); } }
      function closeModal(){ if(loginModal){ loginModal.style.display='none'; } }
      loginLink && loginLink.addEventListener('click', function(e){ e.preventDefault(); openModal(); });
      loginClose && loginClose.addEventListener('click', closeModal);
      loginBack && loginBack.addEventListener('click', showSelect);
      tabEmailOtp && tabEmailOtp.addEventListener('click', function(){ showTab('email-otp'); });
      tabSmsOtp && tabSmsOtp.addEventListener('click', function(){ showTab('sms-otp'); });
      const selectEmailOrPhone = document.getElementById('select-email-or-phone');
      selectEmailOrPhone && selectEmailOrPhone.addEventListener('click', function(){ showForms(); showTab('sms-otp'); });
      // Apple ÁôªÂΩïÔºö‰ºòÂÖàË∞ÉÁî®ÂÆòÊñπ SDKÔºåÂ§±Ë¥•Êó∂ÂõûÈÄÄÂà∞ÂêéÁ´ØÈáçÂÆöÂêë
      function loginWithApple(){
        const base = (function(){
          try {
            var b = window.POLLY_AUTH_BASE || '';
            if (b) {
              if (!/\/$/.test(b)) b += '/';
              return b + 'oauth/apple/start';
            }
          } catch(_){ }
          return (window.POLLY_API && typeof window.POLLY_API.url === 'function') ? window.POLLY_API.url('oauth/apple/start') : '/oauth/apple/start';
        })();
        const redirectUri = window.location.origin + '/';
        const url = base + (base.includes('?') ? '&' : '?') + 'redirect_uri=' + encodeURIComponent(redirectUri);
        try {
          if (window.AppleID && AppleID.auth && typeof AppleID.auth.signIn === 'function' && window.POLLY_APPLE_CLIENT_ID && window.POLLY_APPLE_REDIRECT_URI) {
            AppleID.auth.init({
              clientId: window.POLLY_APPLE_CLIENT_ID,
              scope: window.POLLY_APPLE_SCOPE || 'name email',
              redirectURI: window.POLLY_APPLE_REDIRECT_URI,
              state: window.POLLY_APPLE_STATE || '',
              nonce: window.POLLY_APPLE_NONCE || '',
              usePopup: true
            });
            AppleID.auth.signIn().catch(function(){ window.location.href = url; });
          } else {
            window.location.href = url;
          }
        } catch (_) {
          window.location.href = url;
        }
      }
      selectApple && selectApple.addEventListener('click', loginWithApple);
    })();
  </script>
  <!-- Config + shared auth/UI logic -->
  <script src="js/config.js" defer></script>
  <script src="js/main.js" defer></script>
</body>
</html>